{% extends "base.html" %}
{% block title %}Editar Usu√°rio{% endblock %}

{% block content %}
<div class="page-container admin-form-page">

  <header class="admin-header" style="text-align:center; margin-bottom:25px;">
    <h1 class="admin-title">‚úè Editar Usu√°rio</h1>
  </header>

  <div class="pedido-card">

    <form class="admin-form" method="POST">

      <div class="form-row">
        <div>
          <label>Nome</label>
          <input type="text" name="nome" value="{{ usuario.nome }}" required>
        </div>

        <div>
          <label>Email</label>
          <input type="email" name="email" value="{{ usuario.email }}" required>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label>Telefone</label>
          <input type="text" name="telefone" id="telefone"
                 value="{{ usuario.telefone or '' }}" placeholder="(99) 99999-9999">
        </div>

        <div style="display:flex; align-items:center; margin-top:22px;">
          <input type="checkbox"
                 name="is_admin"
                 id="is_admin"
                 style="transform:scale(1.3); margin-right:8px;"
                 {% if usuario.is_admin %}checked{% endif %}>
          <label for="is_admin" style="font-weight:bold;">√â administrador?</label>
        </div>
      </div>

      <hr style="margin: 20px 0;">

      <h3 style="margin-bottom:10px;">Alterar senha (opcional)</h3>

      <label>Nova Senha</label>
      <input type="password" name="senha" placeholder="Deixe em branco para n√£o alterar">

      <div class="form-actions" style="margin-top:20px;">
        <button type="submit" class="btn-primary">üíæ Salvar Altera√ß√µes</button>
        <a href="{{ url_for('admin_usuarios') }}" class="btn-secondary">‚ùå Cancelar</a>
      </div>

    </form>

  </div>
</div>

<script>
  // m√°scara de telefone
  document.getElementById("telefone").addEventListener("input", function(e) {
      let v = e.target.value.replace(/\D/g, "");
      if (v.length > 10) {
          e.target.value = v.replace(/(\d{2})(\d{5})(\d{4}).*/, "($1) $2-$3");
      } else {
          e.target.value = v.replace(/(\d{2})(\d{4})(\d{0,4}).*/, "($1) $2-$3");
      }
  });
</script>

{% endblock %}
